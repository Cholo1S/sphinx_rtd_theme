<script async type="text/javascript" src="http://localhost:8000/readthedocs-addons.js"></script>
<script type="text/javascript">
 document.addEventListener("readthedocs-addons-data-ready", function(event) {
     const config = event.detail;

     const flyout = `
  <div class="rst-versions" data-toggle="rst-versions" role="note">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Read the Docs</span>
      v: ${ config.versions.current.slug }
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Languages</dt>
        ${ config.addons.flyout.translations.map(
          (language) => `<dd><a href="${ language.url }">${ language.slug }</a></dd>`).join("\n")}
      </dl>
      <dl>
        <dt>Versions</dt>
        ${ config.addons.flyout.versions.map(
          (version) => `<dd><a href="${ version.url }">${ version.slug }</a></dd>`).join("\n")}
      </dl>
      <dl>
        <dt>Downloads</dt>
        ${ config.addons.flyout.downloads.map(
          (download) => `<dd><a href="${ download.url }">${ download.name }</a></dd>`).join("\n")}
      </dl>
      <dl>
        <dt>On Read the Docs</dt>
          <dd>
            <a href="//${ config.domains.dashboard }/projects/${ config.projects.current.slug }/">Project Home</a>
          </dd>
          <dd>
            <a href="//${ config.domains.dashboard }/projects/${ config.projects.current.slug }/builds/">Builds</a>
          </dd>
      </dl>
    </div>
  </div>
          `;

     document.body.insertAdjacentHTML("beforeend", flyout);

     {# TODO: disable the flyout auto-injected by `readthedocs-addons.js` somehow #}
     document.querySelector("readthedocs-flyout").remove();
 });
</script>
